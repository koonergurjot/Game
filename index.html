<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Gurjot's Games</title>
  <meta name="description" content="A tiny arcade hub with multiple games. Click a tile to play." />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <div class="brand">ðŸŽ® Gurjot's Games</div>
    <div class="hint">Click a game to play â€¢ Add more by copying a folder in <code>/games</code></div>
  </header>
  <main>
    <section class="grid">
      <a class="card" href="./games/box3d/" aria-label="Play 3D Box Playground" data-badge="3D">
        <h3>3D Box Playground</h3>
        <p>WASD + Space to jump. Orbit the camera with your mouse.</p>
        <div class="play">Play â†’</div>
      </a>
      <a class="card" href="./games/pong/" aria-label="Play Pong Classic" data-badge="2D">
        <h3>Pong Classic</h3>
        <p>Arrow keys to move. Keep the ball in play, beat the AI.</p>
        <div class="play">Play â†’</div>
      </a>
      <a class="card" href="./games/runner/" aria-label="Play Endless Runner">
        <div class="badge">2D</div>
        <h3>Endless Runner</h3>
        <p>Space to jump â€¢ Dodge obstacles â€¢ Compete for a high score.</p>
        <div class="play">Play â†’</div>
      </a>
      <a class="card" href="./games/asteroids/" aria-label="Play Asteroids" data-badge="2D">
        <h3>Asteroids</h3>
        <p>Rotate, thrust, and shoot to clear the field.</p>
        <div class="play">Play â†’</div>
      </a>
      <a class="card" href="./games/shooter/" aria-label="Play Space Shooter" data-badge="2D">
        <h3>Space Shooter</h3>
        <p>WASD to move, mouse to aim. Survive waves of enemies.</p>
        <div class="play">Play â†’</div>
      </a>
      <a class="card" href="./games/platformer/" aria-label="Play Retro Platformer" data-badge="2D">
        <h3>Retro Platformer</h3>
        <p>Run and jump through classic levels to reach the goal.</p>
        <div class="play">Play â†’</div>
      </a>
      <a class="card" href="./games/maze3d/" aria-label="Play 3D Maze Explorer" data-badge="3D">
        <h3>3D Maze Explorer</h3>
        <p>Navigate a 3D labyrinth and find the exit.</p>
        <div class="play">Play â†’</div>
      </a>
      </section>
  </main>
  <footer>Static, framework-free. Host anywhere (GitHub Pages ready).</footer>
  <script>
    fetch('games.json')
      .then(r => r.json())
      .then(games => {
        const grid = document.querySelector('.grid');
        const main = document.querySelector('main');
        if (!grid || !main) return;
        grid.innerHTML = '';

        const buildCard = (g) => {
          const a = document.createElement('a');
          a.className = 'card';
          a.href = g.path;
          a.dataset.badge = g.badge;
          a.setAttribute('aria-label', `Play ${g.name}`);

          const h3 = document.createElement('h3');
          h3.textContent = g.name;

          const p = document.createElement('p');
          p.textContent = g.description;

          const play = document.createElement('div');
          play.className = 'play';
          play.textContent = 'Play â†’';

          a.append(h3, p, play);
          return a;
        };

        const favIds = new Set(JSON.parse(localStorage.getItem('favorites') || '[]'));
        const rawLast = JSON.parse(localStorage.getItem('lastPlayed') || '[]');
        const seen = new Set();
        const recentIds = [];
        for (let i = rawLast.length - 1; i >= 0 && recentIds.length < 10; i--) {
          const id = rawLast[i];
          if (!seen.has(id)) {
            seen.add(id);
            recentIds.push(id);
          }
        }

        const makeSection = (title, list) => {
          if (!list.length) return;
          const section = document.createElement('section');
          const h2 = document.createElement('h2');
          h2.textContent = title;
          const subGrid = document.createElement('div');
          subGrid.className = 'grid';
          for (const g of list) subGrid.appendChild(buildCard(g));
          section.append(h2, subGrid);
          main.insertBefore(section, grid);
        };

        const favoriteGames = games.filter(g => favIds.has(g.id));
        makeSection('Favorites', favoriteGames);

        const recentGames = recentIds
          .map(id => games.find(g => g.id === id))
          .filter(Boolean);
        makeSection('Recently Played', recentGames);

        for (const g of games) {
          grid.appendChild(buildCard(g));
        }
      })
      .catch(err => {
        console.warn('Failed to load games.json', err);
      });
  </script>
</body>
</html>
