{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Gurjots Games catalog",
  "description": "Schema describing the structure of games.json entries for Game Doctor checks.",
  "type": "array",
  "minItems": 1,
  "items": {
    "type": "object",
    "additionalProperties": false,
    "required": [
      "id",
      "slug",
      "title",
      "description",
      "controls",
      "tags",
      "engineType",
      "assets",
      "version",
      "thumbnailPath",
      "featureFlags",
      "minDevice",
      "difficulty",
      "released",
      "playUrl",
      "help"
    ],
    "properties": {
      "id": {
        "type": "string",
        "pattern": "^[a-z0-9-]+$",
        "minLength": 1
      },
      "slug": {
        "type": "string",
        "pattern": "^[a-z0-9-]+$",
        "minLength": 1
      },
      "title": {
        "type": "string",
        "minLength": 1
      },
      "description": {
        "type": "string",
        "minLength": 1
      },
      "controls": {
        "type": "string",
        "minLength": 1
      },
      "short": {
        "type": "string",
        "minLength": 1
      },
      "tags": {
        "type": "array",
        "minItems": 1,
        "uniqueItems": true,
        "items": {
          "type": "string",
          "pattern": "^[A-Za-z0-9][A-Za-z0-9+\\-/ ]*$"
        }
      },
      "difficulty": {
        "type": "string",
        "enum": ["easy", "medium", "hard"]
      },
      "released": {
        "type": "string",
        "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
      },
      "playUrl": {
        "type": "string",
        "pattern": "^/games/[a-z0-9-]+/$"
      },
      "engineType": {
        "type": "string",
        "pattern": "^[a-z0-9-]+$",
        "minLength": 1
      },
      "version": {
        "type": "string",
        "pattern": "^\\d+\\.\\d+\\.\\d+(?:-[A-Za-z0-9.-]+)?$"
      },
      "thumbnailPath": {
        "type": "string",
        "pattern": "^/(assets|games)/.+"
      },
      "featureFlags": {
        "type": "array",
        "items": {
          "type": "string",
          "pattern": "^[A-Za-z0-9][A-Za-z0-9+\\-/ ]*$"
        }
      },
      "minDevice": {
        "type": "object",
        "required": ["width", "height"],
        "additionalProperties": false,
        "properties": {
          "width": {
            "type": "integer",
            "minimum": 1
          },
          "height": {
            "type": "integer",
            "minimum": 1
          },
          "memoryMB": {
            "type": "integer",
            "minimum": 1
          },
          "cpu": {
            "type": "string",
            "minLength": 1
          }
        }
      },
      "thumbnail": {
        "type": "string",
        "pattern": "^/(assets|games)/.+"
      },
      "assets": {
        "type": "object",
        "required": ["sprites"],
        "additionalProperties": false,
        "properties": {
          "sprites": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "string",
              "pattern": "^/assets/.+"
            }
          },
          "audio": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "string",
              "pattern": "^/assets/.+"
            }
          }
        }
      },
      "firstFrame": {
        "type": "object",
        "required": ["sprites"],
        "additionalProperties": false,
        "properties": {
          "sprites": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "string",
              "pattern": "^/assets/.+"
            }
          },
          "audio": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "string",
              "pattern": "^/assets/.+"
            }
          }
        }
      },
      "help": {
        "type": "object",
        "required": ["objective", "controls", "tips", "steps"],
        "additionalProperties": false,
        "properties": {
          "objective": {
            "type": "string",
            "minLength": 1
          },
          "controls": {
            "type": "string",
            "minLength": 1
          },
          "tips": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "string",
              "minLength": 1
            }
          },
          "steps": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "string",
              "minLength": 1
            }
          }
        }
      }
    }
  }
}
